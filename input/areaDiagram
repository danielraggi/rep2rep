import arith
import event
import shade

typeSystem areaDiagram =
  imports arith, eventT, shade
  types _:tag, _:area, _:rect, _:point, empty, _:coloured
  order empty < area, event < tag

conSpec areaDiagramG:areaDiagram =
  imports arithG, event
  modes proportional
  constructors
    reverseTag: [tag] -> tag -- emergent,
    cPoint:[numExp, numExp] -> point -- iconic,
    cRect: [point, point] -> rect -- iconic,
    overlayRect: [area, rect, tag, shading] -> area -- spatial-index,
    colour: [coloured, tag, shading] -> coloured -- iconic,
    addColour: [area, coloured] -> area -- emergent,
    combine: [area, area] -> area -- spatial-index
